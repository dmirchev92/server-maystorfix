(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{9733:function(e,s,t){Promise.resolve().then(t.bind(t,1603))},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},1603:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var r=t(7437),a=t(2265),o=t(9376),l=t(7648),i=t(3659);let n=["Електротехник","Водопроводчик","Климатик","Строител","Мебелист","Боядисване","Почистване","Градинарство","Автосервиз","Друго"],d=["София","Пловдив","Варна","Бургас"];function c(){let e;let s=(0,o.useRouter)(),t=(0,o.useSearchParams)(),[c,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:"",userType:"customer",companyName:"",serviceCategory:"",city:"",neighborhood:"",acceptTerms:!1});(0,a.useEffect)(()=>{let e=t.get("type");"provider"===e||"service_provider"===e?h(e=>({...e,userType:"service_provider"})):"customer"===e&&h(e=>({...e,userType:"customer"}))},[t]);let x=(e,s)=>{h(t=>({...t,[e]:s}))},p=e=>{let s=/[A-Z]/.test(e),t=/[a-z]/.test(e),r=/\d/.test(e),a=/[!@#$%^&*(),.?":{}|<>]/.test(e),o=e.length>=8;return s&&t&&r&&a&&o},f=async e=>{if(e.preventDefault(),console.log("\uD83D\uDE80 handleSubmit called!"),console.log("\uD83D\uDCCB Form data:",u),!u.email||!u.password||!u.firstName||!u.lastName||!u.phoneNumber){alert("Моля попълнете всички задължителни полета");return}if(u.password!==u.confirmPassword){alert("Паролите не съвпадат");return}if(!p(u.password)){alert("Паролата трябва да съдържа поне 8 символа, главна буква, малка буква, цифра и специален символ");return}if("service_provider"===u.userType&&(!u.companyName||!u.serviceCategory)){alert("Моля попълнете всички полета за доставчик на услуги");return}if(!u.acceptTerms){alert("Трябва да приемете условията за ползване");return}m(!0);try{var t,r,a;let e=u.phoneNumber;e.startsWith("+359")||(e=e.startsWith("0")?"+359"+e.substring(1):"+359"+e);let o={email:u.email,password:u.password,firstName:u.firstName,lastName:u.lastName,phoneNumber:e,role:"service_provider"===u.userType?"tradesperson":"customer",..."service_provider"===u.userType&&{serviceCategory:u.serviceCategory,companyName:u.companyName,city:u.city||(u.neighborhood?"София":""),neighborhood:u.neighborhood},gdprConsents:["essential_service"]};console.log("\uD83D\uDD0D Registration payload:",o),console.log("\uD83D\uDD0D Form data neighborhood:",u.neighborhood),console.log("\uD83D\uDD0D User type:",u.userType);let l=await fetch("".concat("https://maystorfix.com/api/v1","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),i=await l.json();i.success?((null===(r=i.data)||void 0===r?void 0:null===(t=r.tokens)||void 0===t?void 0:t.accessToken)&&(localStorage.setItem("auth_token",i.data.tokens.accessToken),localStorage.setItem("user_data",JSON.stringify(i.data.user))),alert("Регистрацията е успешна!"),s.push("/auth/login?registered=true")):(console.error("Registration failed:",i),alert((null===(a=i.error)||void 0===a?void 0:a.message)||"Грешка при регистрация"))}catch(e){console.error("Registration error:",e),alert("Възникна грешка при регистрацията")}finally{m(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 rounded-lg blur-3xl"}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-br from-blue-500/10 to-slate-500/10 rounded-lg blur-3xl"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-slate-500/5 to-indigo-500/5 rounded-full blur-3xl"})]}),(0,r.jsxs)("div",{className:"relative z-10 sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsxs)("button",{onClick:()=>s.back(),className:"flex items-center text-slate-300 hover:text-white transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Назад"]})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/50",children:(0,r.jsx)("span",{className:"text-3xl",children:"\uD83D\uDD27"})})}),(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Създайте акаунт"}),(0,r.jsxs)("p",{className:"mt-2 text-center text-sm text-slate-300",children:["Или"," ",(0,r.jsx)(l.default,{href:"/auth/login",className:"font-medium text-indigo-400 hover:text-indigo-300 transition-colors",children:"влезте в съществуващ акаунт"})]})]}),(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md relative z-20",children:(0,r.jsx)("div",{className:"bg-slate-800/50 backdrop-blur-md border border-white/10 rounded-2xl shadow-2xl py-8 px-4 sm:px-10",children:(0,r.jsxs)("form",{className:"space-y-6",onSubmit:f,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-base font-medium text-slate-200",children:"Тип акаунт"}),(0,r.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"customer",name:"userType",type:"radio",checked:"customer"===u.userType,onChange:()=>x("userType","customer"),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-slate-600 bg-slate-700"}),(0,r.jsx)("label",{htmlFor:"customer",className:"ml-3 block text-sm font-medium text-slate-300",children:"Клиент - търся услуги"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"service_provider",name:"userType",type:"radio",checked:"service_provider"===u.userType,onChange:()=>x("userType","service_provider"),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-slate-600 bg-slate-700"}),(0,r.jsx)("label",{htmlFor:"service_provider",className:"ml-3 block text-sm font-medium text-slate-300",children:"Доставчик на услуги - предлагам услуги"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-slate-200",children:"Име *"}),(0,r.jsx)("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:u.firstName,onChange:e=>x("firstName",e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white placeholder-slate-400 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Иван"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-slate-200",children:"Фамилия *"}),(0,r.jsx)("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:u.lastName,onChange:e=>x("lastName",e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white placeholder-slate-400 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Петров"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-200",children:"Имейл адрес *"}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:u.email,onChange:e=>x("email",e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white placeholder-slate-400 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"ivan@example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-slate-200",children:"Телефон *"}),(0,r.jsx)("input",{id:"phoneNumber",name:"phoneNumber",type:"tel",required:!0,value:u.phoneNumber,onChange:e=>x("phoneNumber",e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white placeholder-slate-400 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"+359xxxxxxxxx"})]}),"service_provider"===u.userType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"companyName",className:"block text-sm font-medium text-slate-200",children:"Име на компанията *"}),(0,r.jsx)("input",{id:"companyName",name:"companyName",type:"text",required:!0,value:u.companyName,onChange:e=>x("companyName",e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white placeholder-slate-400 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Вашата компания ООД"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"serviceCategory",className:"block text-sm font-medium text-slate-200",children:"Категория услуги *"}),(0,r.jsxs)("select",{id:"serviceCategory",name:"serviceCategory",required:!0,value:u.serviceCategory,onChange:e=>x("serviceCategory",e.target.value),className:"mt-1 block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"Изберете категория"}),n.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-slate-200",children:"Град"}),(0,r.jsxs)("select",{id:"city",value:u.city||"",onChange:e=>{x("city",e.target.value),x("neighborhood","")},className:"mt-1 block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"Изберете град"}),d.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),"София"===u.city&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"neighborhood",className:"block text-sm font-medium text-slate-200",children:"Квартал в София"}),(0,r.jsx)(i.ZP,{value:u.neighborhood||"",onChange:e=>x("neighborhood",e),placeholder:"Изберете квартал",className:"mt-1 block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-200",children:"Парола *"}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:u.password,onChange:e=>x("password",e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white placeholder-slate-400 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"••••••••"}),u.password&&(0,r.jsx)("div",{className:"mt-3 space-y-2",children:[{label:"Поне 8 символа",met:(e=u.password).length>=8},{label:"Главна буква (A-Z)",met:/[A-Z]/.test(e)},{label:"Малка буква (a-z)",met:/[a-z]/.test(e)},{label:"Цифра (0-9)",met:/\d/.test(e)},{label:"Специален символ (@$!%*?&)",met:/[!@#$%^&*(),.?":{}|<>]/.test(e)}].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center text-xs",children:[e.met?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{className:"w-4 h-4 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:e.met?"text-green-500 font-medium":"text-slate-400",children:e.label})]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-200",children:"Потвърдете паролата *"}),(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:u.confirmPassword,onChange:e=>x("confirmPassword",e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 bg-slate-700/50 border border-white/10 text-white placeholder-slate-400 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"••••••••"}),u.confirmPassword&&(0,r.jsx)("div",{className:"mt-2 flex items-center text-xs",children:u.password===u.confirmPassword?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-green-500 font-medium",children:"Паролите съвпадат"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,r.jsx)("span",{className:"text-red-500",children:"Паролите не съвпадат"})]})})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"acceptTerms",name:"acceptTerms",type:"checkbox",checked:u.acceptTerms,onChange:e=>x("acceptTerms",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-slate-600 rounded bg-slate-700"}),(0,r.jsxs)("label",{htmlFor:"acceptTerms",className:"ml-2 block text-sm text-slate-300",children:["Съгласявам се с"," ",(0,r.jsx)("a",{href:"#",className:"text-indigo-400 hover:text-indigo-300",children:"условията за ползване"})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg shadow-indigo-500/50",children:c?"Създаване...":"Създайте акаунт"})})]})})})]})}function m(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,r.jsx)(c,{})})}},3659:function(e,s,t){"use strict";t.d(s,{ZP:function(){return l},vp:function(){return o}});var r=t(7437),a=t(2265);let o=["7-и – 11-и километър","Абдовица","Аерогарата","Американски колеж (вилна зона)","БАН IV километър","Банишора","Барите","Батареята","Белите брези (квартал)","Бенковски (квартал)","Борово (квартал)","Ботунец","Ботунец 1","Ботунец 2","Бояна (квартал на София)","Бункера","Бъкстон","Васил Левски (квартал на София)","Витоша (квартал)","Воденицата","Военна рампа","Враждебна","Връбница-1","Връбница-2","Гевгелийски квартал","Гео Милев (квартал)","Горна баня","Горна баня (вилна зона)","Горубляне","Гоце Делчев (квартал)","Градина (квартал)","Група-Зоопарк","Гърдова глава","Дианабад","Дианабад (промишлена зона)","Димитър Миленков (квартал)","Долни Смърдан","Драгалевци","Дружба (квартал на София)","Друмо","Дървеница","Експериментален","Западен парк (квартал)","Захарна фабрика","Зона Б-18","Зона Б-19","Зона Б-5","Зона Б-5-3","Иван Вазов","Изгрев","Изток","Илинден","Илиянци","Искър","Канала","Карпузица","Килиите","Киноцентъра","Княжево","Красна поляна 1","Красна поляна 2","Красна поляна 3","Красно село","Кремиковци","Крива река","Кръстова вада","Лагера","Лев Толстой (жилищен комплекс)","Левски В","Левски Г","Лозенец (квартал на София)","Люлин (вилна зона)","Люлин (квартал)","Мала кория","Малинова долина","Малинова долина (жилищен комплекс)","Манастирски ливади","Манастирски ливади (жилищен комплекс)","Манастирски ливади - Б","Младост 1","Младост 1А","Младост 2","Младост 3","Младост 4","Могилата (вилна зона)","Модерно предградие","Модерно предградие (промишлена зона)","Надежда I","Надежда II","Надежда III","Надежда IV","Национален киноцентър","Нова махала – Враждебна","Нови силози","Обеля","Обеля 1","Обеля 2","Овча купел","Овча купел (жилищен комплекс)","Орландовци",'Парк „Бакърени гробища"',"Подлозище","Подуяне","Полигона (квартал)","Равнище (квартал)","Разсадник-Коньовица","Резиденция Бояна (квартал)","Република (квартал)","Република-2","Света Троица (квартал)","Свобода (квартал)","Секулица (квартал)","Сердика (жилищен комплекс)","Сеславци","Симеоново","Славия (квартал)","Слатина (промишлена зона)","Смърдана","Средец (промишлена зона)","Стрелбище (квартал)","Студентски град","Сухата река","Суходол (квартал)","Толева махала","Требич","Триъгълника-Надежда","Трънска махала","Факултета","Филиповци (жилищен комплекс)","Филиповци (квартал)","Фондови жилища","Фохар","Хаджи Димитър (жилищен комплекс)","Хаджи Димитър (промишлена зона)","Хиподрума","Хладилника","Хладилника (промишлена зона)","Христо Ботев (квартал на София)","Христо Смирненски (жилищен комплекс)","Център на София","Челопечене","Чепинско шосе","Черния кос","Черно конче","Южен парк (квартал)","Яворов (жилищен комплекс)","Япаджа"];function l(e){let{value:s,onChange:t,placeholder:l="Изберете квартал",required:i=!1,className:n="",disabled:d=!1}=e,[c,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)("");return o.filter(e=>e.toLowerCase().includes(u.toLowerCase())),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{value:s,onChange:e=>t(e.target.value),required:i,disabled:d,className:n||"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:l}),o.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=9733)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{8838:function(e,r,s){Promise.resolve().then(s.bind(s,8138))},8138:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return o},dynamic:function(){return c}});var a=s(7437),l=s(2265),t=s(9376),n=s(1819),i=s(2834);let c="force-dynamic";function o(){let e=(0,t.useSearchParams)(),[r,s]=(0,l.useState)(null),[c,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[m,x]=(0,l.useState)(!1),[h,f]=(0,l.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phoneNumber:"",businessName:"",serviceCategory:"",city:"",agreeToTerms:!1});(0,l.useEffect)(()=>{let r=e.get("ref");r&&(s(r),g(r))},[e]);let g=async e=>{try{var r,s,a,l;console.log("\uD83D\uDD0D Validating referral code:",e);let t=await fetch("".concat("https://maystorfix.com/api/v1","/referrals/validate/").concat(e)),n=await t.json();console.log("\uD83D\uDD0D Referral validation response:",n),o((null===(r=n.data)||void 0===r?void 0:r.valid)||!1),u((null===(s=n.data)||void 0===s?void 0:s.referrerName)||null),(null===(a=n.data)||void 0===a?void 0:a.valid)?console.log("✅ Referral code is valid for:",null===(l=n.data)||void 0===l?void 0:l.referrerName):console.log("❌ Referral code is invalid")}catch(e){console.error("❌ Error validating referral code:",e),o(!1),u(null)}},p=e=>{let{name:r,value:s,type:a}=e.target;f(l=>({...l,[r]:"checkbox"===a?e.target.checked:s}))},b=async e=>{if(e.preventDefault(),h.password!==h.confirmPassword){alert("Паролите не съвпадат!");return}if(!h.agreeToTerms){alert("Моля, приемете условията за ползване!");return}x(!0);try{var s,a,l;let e={firstName:h.firstName,lastName:h.lastName,email:h.email,password:h.password,phoneNumber:h.phoneNumber.startsWith("+359")?h.phoneNumber:"+359".concat(h.phoneNumber.replace(/^0/,"")),role:"tradesperson",gdprConsents:["essential_service"]};console.log("\uD83D\uDCDD Sending registration data:",e),console.log("\uD83E\uDD1D Referral context:",{referralCode:r,referralValid:c,referrerName:d});let t=await fetch("".concat("https://maystorfix.com/api/v1","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.text();throw console.error("Registration error response:",e),Error("Failed to create account: ".concat(e))}let n=await t.json(),i=null===(a=n.data)||void 0===a?void 0:null===(s=a.user)||void 0===s?void 0:s.id;if(!i)throw Error("User ID not returned from registration");if(await fetch("".concat("https://maystorfix.com/api/v1","/marketplace/providers/profile"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===(l=n.data)||void 0===l?void 0:l.token)},body:JSON.stringify({businessName:h.businessName,serviceCategory:h.serviceCategory,city:h.city,phoneNumber:h.phoneNumber,email:h.email})}),r&&c)try{console.log("\uD83E\uDD1D Creating referral relationship:",{referralCode:r,referredUserId:i,referrerName:d});let e=await fetch("".concat("https://maystorfix.com/api/v1","/referrals/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralCode:r,referredUserId:i})}),s=await e.json();console.log("\uD83E\uDD1D Referral creation response:",s),console.log("\uD83E\uDD1D Referral response status:",e.status),console.log("\uD83E\uDD1D Referral response headers:",Object.fromEntries(e.headers.entries())),e.ok&&s.success?console.log("✅ Referral relationship created successfully"):console.error("❌ Failed to create referral relationship:",{status:e.status,statusText:e.statusText,response:s,requestData:{referralCode:r,referredUserId:i}})}catch(e){console.error("❌ Failed to create referral relationship:",e)}else console.log("\uD83E\uDD1D No referral code or invalid referral code:",{referralCode:r,referralValid:c});alert("Регистрацията е успешна! Моля, влезте в профила си."),window.location.href="/login"}catch(e){console.error("Signup error:",e),alert("Грешка при регистрация. Моля, опитайте отново.")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(n.Header,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDE80 Присъединете се към ServiceText Pro"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Създайте профил и започнете да получавате повече клиенти"})]}),r&&(0,a.jsx)("div",{className:"mb-6 p-4 rounded-lg border ".concat(null===c?"bg-blue-50 border-blue-200":c?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-2xl mr-3",children:null===c?"\uD83D\uDD04":c?"\uD83C\uDF89":"❌"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold ".concat(null===c?"text-blue-800":c?"text-green-800":"text-red-800"),children:null===c?"Проверяване на препоръчителния код...":c?"Валиден препоръчителен код!":"Невалиден препоръчителен код"}),(0,a.jsx)("p",{className:"text-sm ".concat(null===c?"text-blue-600":c?"text-green-600":"text-red-600"),children:null===c?"Код: ".concat(r):c?"Препоръчани сте от колега! ".concat(d):"Този препоръчителен код не съществува"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-8",children:[(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\uD83D\uDC64 Лична информация"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Име *"}),(0,a.jsx)("input",{type:"text",name:"firstName",required:!0,value:h.firstName,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Вашето име"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Фамилия *"}),(0,a.jsx)("input",{type:"text",name:"lastName",required:!0,value:h.lastName,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Вашата фамилия"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\uD83D\uDCDE Контактна информация"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Имейл адрес *"}),(0,a.jsx)("input",{type:"email",name:"email",required:!0,value:h.email,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефонен номер *"}),(0,a.jsx)("input",{type:"tel",name:"phoneNumber",required:!0,value:h.phoneNumber,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+359..."})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\uD83C\uDFE2 Бизнес информация"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Име на бизнеса"}),(0,a.jsx)("input",{type:"text",name:"businessName",value:h.businessName,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Име на вашата фирма (по избор)"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория услуга *"}),(0,a.jsxs)("select",{name:"serviceCategory",required:!0,value:h.serviceCategory,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Изберете категория"}),[{value:"electrician",label:"Електротехник"},{value:"plumber",label:"Водопроводчик"},{value:"hvac",label:"Климатик"},{value:"carpenter",label:"Дърводелец"},{value:"painter",label:"Бояджия"},{value:"locksmith",label:"Ключар"},{value:"cleaner",label:"Почистване"},{value:"gardener",label:"Градинар"},{value:"handyman",label:"Майстор за всичко"},{value:"appliance_repair",label:"Ремонт на уреди"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Град *"}),(0,a.jsxs)("select",{name:"city",required:!0,value:h.city,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Изберете град"}),["София","Пловдив","Варна","Бургас","Русе","Стара Загора","Плевен","Добрич","Сливен","Шумен","Перник","Хасково","Ямбол","Пазарджик","Благоевград","Велико Търново","Враца","Габрово"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\uD83D\uDD12 Парола"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Парола *"}),(0,a.jsx)("input",{type:"password",name:"password",required:!0,value:h.password,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Минимум 8 символа",minLength:8})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Потвърдете паролата *"}),(0,a.jsx)("input",{type:"password",name:"confirmPassword",required:!0,value:h.confirmPassword,onChange:p,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Повторете паролата"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("input",{type:"checkbox",name:"agreeToTerms",id:"agreeToTerms",required:!0,checked:h.agreeToTerms,onChange:p,className:"mt-1 mr-3"}),(0,a.jsxs)("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-700",children:["Съгласен съм с"," ",(0,a.jsx)("a",{href:"/terms",className:"text-blue-600 hover:underline",children:"условията за ползване"})," ","и"," ",(0,a.jsx)("a",{href:"/privacy",className:"text-blue-600 hover:underline",children:"политиката за поверителност"}),"*"]})]}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"w-full py-3 px-4 rounded-lg font-medium text-white ".concat(m?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"," transition-colors"),children:m?"⏳ Създаване на профил...":"\uD83D\uDE80 Създай профил"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-gray-600",children:["Вече имате профил?"," ",(0,a.jsx)("a",{href:"/login",className:"text-blue-600 hover:underline font-medium",children:"Влезте тук"})]})})]})]})}),(0,a.jsx)(i.$,{})]})}},2834:function(e,r,s){"use strict";s.d(r,{$:function(){return t}});var a=s(7437),l=s(7648);function t(){return(0,a.jsx)("footer",{className:"bg-slate-900 text-white",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-orange-500 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"\uD83D\uDD27"})}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"ServiceText Pro"})]}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Платформата за намиране на най-добрите професионалисти в България. Свързваме клиенти с верифицирани майстори за всички видове услуги."}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Facebook"}),(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})]}),(0,a.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Instagram"}),(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987 6.62 0 11.987-5.367 11.987-11.987C24.014 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.708 13.744 3.708 12.447s.49-2.448 1.297-3.323c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.807.875 1.297 2.026 1.297 3.323s-.49 2.448-1.297 3.323c-.875.807-2.026 1.297-3.323 1.297z"})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Услуги"}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/search?service=electrical",className:"text-gray-400 hover:text-white",children:"Електротехник"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/search?service=plumbing",className:"text-gray-400 hover:text-white",children:"Водопроводчик"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/search?service=hvac",className:"text-gray-400 hover:text-white",children:"Климатик"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/search?service=general",className:"text-gray-400 hover:text-white",children:"Общ майстор"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Компания"}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/about",className:"text-gray-400 hover:text-white",children:"За нас"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/how-it-works",className:"text-gray-400 hover:text-white",children:"Как работи"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/contact",className:"text-gray-400 hover:text-white",children:"Контакти"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/privacy",className:"text-gray-400 hover:text-white",children:"Поверителност"})})]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"\xa9 2024 ServiceText Pro. Всички права запазени."}),(0,a.jsxs)("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[(0,a.jsx)(l.default,{href:"/terms",className:"text-gray-400 hover:text-white text-sm",children:"Условия за ползване"}),(0,a.jsx)(l.default,{href:"/privacy",className:"text-gray-400 hover:text-white text-sm",children:"Политика за поверителност"}),(0,a.jsx)(l.default,{href:"/gdpr",className:"text-gray-400 hover:text-white text-sm",children:"GDPR"})]})]})})]})})}}},function(e){e.O(0,[301,648,137,924,819,971,117,744],function(){return e(e.s=8838)}),_N_E=e.O()}]);
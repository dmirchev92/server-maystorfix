(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{2744:function(e,t,o){Promise.resolve().then(o.bind(o,5207))},5207:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return r}});var s=o(7437),i=o(2265),a=o(9376),n=o(3464);function r(e){var t,o;let{params:r}=e,{spIdentifier:l,token:d}=r;(0,a.useRouter)();let[c,m]=(0,i.useState)(!1),[u,h]=(0,i.useState)(null),[x,g]=(0,i.useState)(null),[v,p]=(0,i.useState)(!1),[f,b]=(0,i.useState)([]),[w,N]=(0,i.useState)(""),[j,k]=(0,i.useState)(!1),[y,D]=(0,i.useState)(!1),[I,C]=(0,i.useState)(!1),[S,E]=(0,i.useState)({name:"",phone:"",email:"",password:"",confirmPassword:""}),[F,P]=(0,i.useState)("register"),[_,T]=(0,i.useState)(null),[L,M]=(0,i.useState)({businessName:"",firstName:"",serviceCategory:"electrician"});(0,i.useEffect)(()=>{y||Z()},[l,d,y]);let Z=async()=>{try{D(!0);let e="chat_session_".concat(l),t="chat_token_".concat(l),o=localStorage.getItem(e),s=localStorage.getItem(t);if(o&&s&&s!==d){console.log("New token detected! Last used: ".concat(s,", Current: ").concat(d)),console.log("Forcing token validation for new token..."),localStorage.removeItem(e),localStorage.removeItem(t),await R(),p(!0);return}if(o){console.log("Found existing session:",o),console.log("Same token as before, using existing session");let s=await n.Z.get("".concat("https://maystorfix.com/api/v1","/chat/sessions/").concat(o,"/validate"),{timeout:1e4});if(s.data.success){console.log("✅ Token validation successful:",s.data),h({valid:!0,userId:s.data.data.userId,conversationId:s.data.data.conversationId}),s.data.data.userId&&await O(s.data.data.userId),p(!0);return}localStorage.removeItem(e),localStorage.removeItem(t)}console.log("No existing session, showing welcome screen")}catch(e){console.log("Session check failed, showing welcome screen:",e)}},R=async()=>{var e,t,o,s;try{m(!0),g(null),console.log("Validating token:",{spIdentifier:l,token:d.substring(0,4)+"****"});let t=await n.Z.get("".concat("https://maystorfix.com/api/v1","/chat/public/").concat(l,"/validate/").concat(d),{timeout:1e4,headers:{"Content-Type":"application/json"}});if(t.data.success){console.log("Token validation successful:",t.data);let e="chat_session_".concat(l),o="chat_token_".concat(l);t.data.data.sessionId&&(localStorage.setItem(e,t.data.data.sessionId),localStorage.setItem(o,d),console.log("Stored session ID:",t.data.data.sessionId),console.log("Stored token:",d)),h({valid:!0,userId:t.data.data.userId,conversationId:t.data.data.conversationId}),C(!0),console.log("\uD83D\uDCDD Showing customer form for token:",d)}else console.error("Token validation failed:",t.data),h({valid:!1,error:(null===(e=t.data.error)||void 0===e?void 0:e.message)||"Token validation failed"})}catch(i){console.error("Token validation error:",i);let e="Failed to validate chat token";(null===(s=i.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:null===(t=o.error)||void 0===t?void 0:t.message)?e=i.response.data.error.message:i.message&&(e=i.message),h({valid:!1,error:e}),g(e)}finally{m(!1)}},q=async()=>{p(!0),await R()},A=async()=>{if(!w.trim()||j||!(null==u?void 0:u.conversationId)){console.log("❌ Cannot send message:",{hasMessage:!!w.trim(),isSending:j,hasConversationId:!!(null==u?void 0:u.conversationId),conversationId:null==u?void 0:u.conversationId});return}console.log("\uD83D\uDCE4 Sending message:",{conversationId:u.conversationId,messageLength:w.length,validationResult:u}),k(!0);try{let e={id:Date.now().toString(),text:w,sender:"customer",timestamp:new Date().toISOString()};b(t=>[...t,e]),N("");let t="".concat("https://maystorfix.com/api/v1","/marketplace/conversations/").concat(u.conversationId,"/messages");console.log("\uD83D\uDCE4 Sending message to:",t),await n.Z.post(t,{senderType:"customer",senderName:S.name||"Customer",message:w,messageType:"text"}),console.log("✅ Message sent successfully")}catch(n){var e,t,o,s,i,a,r,l;console.error("❌ Failed to send message:",n),console.error("❌ Error details:",{message:n.message,status:null===(e=n.response)||void 0===e?void 0:e.status,statusText:null===(t=n.response)||void 0===t?void 0:t.statusText,data:null===(o=n.response)||void 0===o?void 0:o.data,url:null===(s=n.config)||void 0===s?void 0:s.url}),alert("Грешка при изпращане на съобщението: ".concat((null===(i=n.response)||void 0===i?void 0:i.status)||"Неизвестна грешка","\n\nДетайли: ").concat((null===(l=n.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:null===(a=r.error)||void 0===a?void 0:a.message)||n.message)),b(e=>e.filter(e=>e.id!==Date.now().toString()))}finally{k(!1)}},U=(e,t)=>{E(o=>({...o,[e]:t})),T(null)},z=async e=>{var t,o,s,i,a,r,d,c,m,h,x;if(e.preventDefault(),T(null),!S.name||!S.email||!S.phone||!S.password){T("Моля попълнете всички полета");return}if(S.password!==S.confirmPassword){T("Паролите не съвпадат");return}if(S.password.length<6){T("Паролата трябва да е поне 6 символа");return}try{let e=await n.Z.post("".concat("https://maystorfix.com/api/v1","/auth/register"),{email:S.email,password:S.password,firstName:S.name.split(" ")[0]||S.name,lastName:S.name.split(" ").slice(1).join(" ")||"",phoneNumber:S.phone,role:"customer"});if(null===(t=e.data)||void 0===t?void 0:t.success){console.log("Registration successful, auto-logging in...");let e=await n.Z.post("".concat("https://maystorfix.com/api/v1","/auth/login"),{email:S.email,password:S.password});console.log("Login response after registration:",e.data);let t=null===(i=e.data)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:null===(o=s.tokens)||void 0===o?void 0:o.accessToken,d=null===(r=e.data)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.user;if(t&&d){console.log("Token and user received, saving to localStorage"),localStorage.setItem("auth_token",t),localStorage.setItem("user_data",JSON.stringify(d));try{let e="".concat("https://maystorfix.com/api/v1","/marketplace/conversations/").concat(null==u?void 0:u.conversationId);console.log("\uD83D\uDD04 Updating conversation with customer email before redirect:",{conversationId:null==u?void 0:u.conversationId,customerEmail:d.email,customerName:"".concat(d.firstName," ").concat(d.lastName).trim(),customerPhone:d.phoneNumber}),await n.Z.put(e,{customerName:"".concat(d.firstName," ").concat(d.lastName).trim(),customerPhone:d.phoneNumber,customerEmail:d.email}),console.log("✅ Conversation updated with customer email")}catch(e){console.error("❌ Failed to update conversation:",e)}console.log("Redirecting to main page with chat open...");let e=(null==u?void 0:u.userId)||l;window.location.href="/?openChat=true&providerId=".concat(e)}else console.error("No token in response"),T("Грешка: Не е получен токен за вход след регистрация")}}catch(e){console.error("Registration error:",e),T((null===(m=e.response)||void 0===m?void 0:null===(c=m.data)||void 0===c?void 0:null===(d=c.error)||void 0===d?void 0:d.message)||(null===(x=e.response)||void 0===x?void 0:null===(h=x.data)||void 0===h?void 0:h.message)||"Грешка при регистрация")}},B=async e=>{var t,o,s,i,a,r,d,c,m,h,x,g,v;if(e.preventDefault(),T(null),!S.email||!S.password){T("Моля въведете email и парола");return}try{let e=await n.Z.post("http://192.168.0.129:3000/api/v1/auth/login",{email:S.email,password:S.password});console.log("\uD83D\uDD0D Full login response:",e),console.log("\uD83D\uDD0D loginResponse.data:",e.data),console.log("\uD83D\uDD0D loginResponse.data.data:",null===(t=e.data)||void 0===t?void 0:t.data),console.log("\uD83D\uDD0D loginResponse.data.data.tokens:",null===(s=e.data)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.tokens);let m=null===(r=e.data)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:null===(i=a.tokens)||void 0===i?void 0:i.accessToken,h=null===(c=e.data)||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:d.user;if(console.log("\uD83D\uDD0D Extracted token:",m),console.log("\uD83D\uDD0D Extracted user:",h),m&&h){console.log("Token and user received, saving to localStorage"),localStorage.setItem("auth_token",m),localStorage.setItem("user_data",JSON.stringify(h)),console.log("Token and user saved successfully!");try{let e="".concat("https://maystorfix.com/api/v1","/marketplace/conversations/").concat(null==u?void 0:u.conversationId);console.log("\uD83D\uDD04 Updating conversation with customer email before redirect:",{conversationId:null==u?void 0:u.conversationId,customerEmail:h.email,customerName:"".concat(h.firstName," ").concat(h.lastName).trim(),customerPhone:h.phoneNumber}),await n.Z.put(e,{customerName:"".concat(h.firstName," ").concat(h.lastName).trim(),customerPhone:h.phoneNumber,customerEmail:h.email}),console.log("✅ Conversation updated with customer email")}catch(e){console.error("❌ Failed to update conversation:",e)}console.log("Redirecting to main page with chat open...");let e=(null==u?void 0:u.userId)||l;window.location.href="/?openChat=true&providerId=".concat(e)}else console.error("No token in response"),T("Грешка: Не е получен токен за вход")}catch(e){console.error("Login error:",e),T((null===(x=e.response)||void 0===x?void 0:null===(h=x.data)||void 0===h?void 0:null===(m=h.error)||void 0===m?void 0:m.message)||(null===(v=e.response)||void 0===v?void 0:null===(g=v.data)||void 0===g?void 0:g.message)||"Грешка при вход")}},O=async e=>{try{console.log("\uD83D\uDD0D Fetching provider info for userId:",e);let t=await n.Z.get("".concat("https://maystorfix.com/api/v1","/marketplace/providers/").concat(e));console.log("\uD83D\uDCE1 Provider API response:",t.data),t.data.success?(M(t.data.data),console.log("✅ Provider info loaded:",t.data.data)):(console.error("❌ Provider API returned error:",t.data.error),W())}catch(e){console.error("❌ Failed to fetch provider info:",e),W()}},W=()=>{M({businessName:"Специалист",firstName:"Специалист",lastName:"",serviceCategory:"electrician"}),console.log("\uD83D\uDD04 Using fallback provider info: Специалист")};return c?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 flex items-center justify-center",children:(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-md p-8 rounded-lg shadow-xl border border-white/20 max-w-md w-full mx-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-400 mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Проверяване на връзката..."}),(0,s.jsx)("p",{className:"text-indigo-200",children:"Моля, изчакайте докато проверим вашата връзка."})]})})}):I&&(null==u?void 0:u.valid)?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-md p-8 rounded-lg shadow-xl border border-white/20 max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white mb-2",children:["Започнете чат с ",L.businessName||L.firstName]}),(0,s.jsx)("p",{className:"text-indigo-200 mb-4",children:"Регистрирайте се или влезте за да започнете разговор"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>P("register"),className:"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ".concat("register"===F?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-white/10 text-indigo-200 hover:bg-white/20"),children:"Регистрация"}),(0,s.jsx)("button",{type:"button",onClick:()=>P("login"),className:"flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all ".concat("login"===F?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-white/10 text-indigo-200 hover:bg-white/20"),children:"Вход"})]}),_&&(0,s.jsx)("div",{className:"mb-3 p-2 bg-red-500/20 border border-red-500/50 rounded-lg text-red-200 text-sm",children:_})]}),(0,s.jsxs)("form",{onSubmit:"register"===F?z:B,className:"space-y-4",children:["register"===F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-white mb-1",children:"Име *"}),(0,s.jsx)("input",{type:"text",id:"name",value:S.name,onChange:e=>U("name",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Вашето име",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-white mb-1",children:"Телефон *"}),(0,s.jsx)("input",{type:"tel",id:"phone",value:S.phone,onChange:e=>U("phone",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0888 123 456",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-white mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",id:"email",value:S.email,onChange:e=>U("email",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"your@email.com",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-1",children:"Парола *"}),(0,s.jsx)("input",{type:"password",id:"password",value:S.password,onChange:e=>U("password",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Мин. 6 символа",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-white mb-1",children:"Потвърди парола *"}),(0,s.jsx)("input",{type:"password",id:"confirmPassword",value:S.confirmPassword,onChange:e=>U("confirmPassword",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Потвърдете паролата",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-2 px-4 rounded-md hover:from-green-700 hover:to-blue-700 transition-all font-medium shadow-lg",children:"\uD83D\uDE80 Регистрирай се и започни чат"}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 text-center",children:"Ще бъдете автоматично влезли след регистрацията"})]}),"login"===F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-white mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",id:"email",value:S.email,onChange:e=>U("email",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"your@email.com",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-1",children:"Парола *"}),(0,s.jsx)("input",{type:"password",id:"password",value:S.password,onChange:e=>U("password",e.target.value),onKeyPress:e=>"Enter"===e.key&&B(e),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Вашата парола",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-500 to-pink-500 text-white py-2 px-4 rounded-md hover:from-indigo-600 hover:to-pink-600 transition-all font-medium shadow-lg",children:"\uD83D\uDD13 Влез и започни чат"}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 text-center",children:"Ще бъдете автоматично влезли и чатът ще се отвори"})]})]})]})}):!v||(null==u?void 0:u.valid)?v||(null==u?void 0:u.valid)?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900",children:[(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-md shadow-lg border-b border-white/20",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-white",children:["\uD83D\uDCAC Чат с ",(null==L?void 0:L.businessName)||"техник"]}),(0,s.jsx)("p",{className:"text-sm text-indigo-200",children:"Опишете вашия проблем и ще получите бърз отговор"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-sm text-indigo-200",children:"Онлайн"})]})]})})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-xl border border-white/20 min-h-[600px] flex flex-col",children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/20 bg-indigo-500/10",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:(null==L?void 0:null===(t=L.businessName)||void 0===t?void 0:t.charAt(0).toUpperCase())||"Т"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg shadow-sm border border-white/30",children:[(0,s.jsxs)("p",{className:"text-white mb-2",children:["Здравейте! Аз съм ",(null==L?void 0:L.firstName)||(null==L?void 0:L.businessName)||"вашият техник","."]}),(0,s.jsx)("p",{className:"text-indigo-100 text-sm",children:"Моля, опишете какъв е проблемът и ще ви помогна възможно най-бързо. Ако е спешно, споменете това в съобщението."})]}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-2",children:"Сега"})]})]})}),(0,s.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,s.jsx)("div",{className:"space-y-4",children:0===f.length?(0,s.jsx)("div",{className:"text-center text-indigo-300 py-8",children:(0,s.jsx)("p",{children:"Започнете разговора като напишете съобщение по-долу"})}):f.map(e=>(0,s.jsx)("div",{className:"flex ".concat("customer"===e.sender?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat("customer"===e.sender?"bg-gradient-to-r from-indigo-500 to-pink-500 text-white shadow-lg":"bg-white/20 backdrop-blur-sm text-white border border-white/30"),children:[(0,s.jsx)("p",{children:e.text}),(0,s.jsx)("p",{className:"text-xs mt-1 ".concat("customer"===e.sender?"text-indigo-100":"text-indigo-300"),children:new Date(e.timestamp).toLocaleTimeString("bg-BG",{hour:"2-digit",minute:"2-digit"})})]})},e.id))})}),(0,s.jsxs)("div",{className:"border-t border-white/20 p-4",children:[(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("textarea",{value:w,onChange:e=>N(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())},placeholder:"Опишете вашия проблем тук...",className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg resize-none text-white placeholder-indigo-300 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,disabled:j})}),(0,s.jsx)("button",{onClick:A,disabled:!w.trim()||j,className:"bg-gradient-to-r from-indigo-500 to-pink-500 text-white px-6 py-3 rounded-lg hover:from-indigo-600 hover:to-pink-600 transition-all flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),(0,s.jsx)("p",{className:"text-xs text-indigo-300 mt-2",children:"Натиснете Enter за да изпратите или Shift+Enter за нов ред"})]})]}),(0,s.jsxs)("div",{className:"mt-6 bg-white/10 backdrop-blur-md rounded-lg shadow-xl border border-white/20 p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-white mb-3",children:"ℹ️ Полезна информация"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-indigo-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-white mb-1",children:"Работно време:"}),(0,s.jsx)("p",{children:"Понеделник - Петък: 08:00 - 18:00"}),(0,s.jsx)("p",{children:"Събота: 09:00 - 15:00"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-white mb-1",children:"Спешни случаи:"}),(0,s.jsx)("p",{children:"Отговарям в рамките на 15 минути"}),(0,s.jsx)("p",{children:"Достъпен 24/7 за аварии"})]})]})]})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900",children:[(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-md shadow-lg border-b border-white/20",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-white",children:["\uD83D\uDCAC Чат с ",(null==L?void 0:L.businessName)||"техник"]}),(0,s.jsx)("p",{className:"text-sm text-indigo-200",children:"Опишете вашия проблем и ще получите бърз отговор"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-sm text-indigo-200",children:"Онлайн"})]})]})})}),(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-md rounded-lg shadow-xl border border-white/20 min-h-[600px] flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto p-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(null==L?void 0:L.businessName)?(0,s.jsx)("span",{className:"text-indigo-300 font-bold text-lg",children:L.businessName.charAt(0).toUpperCase()}):(0,s.jsx)("svg",{className:"w-8 h-8 text-indigo-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white mb-4",children:["Добре дошли в чата с ",(null==L?void 0:L.businessName)||"нас","!"]}),(0,s.jsx)("p",{className:"text-indigo-200 mb-6",children:"Готови сме да ви помогнем с вашия проблем. Натиснете бутона по-долу за да започнете разговора."}),(0,s.jsx)("button",{onClick:q,className:"bg-gradient-to-r from-indigo-500 to-pink-500 text-white px-8 py-3 rounded-lg hover:from-indigo-600 hover:to-pink-600 transition-all font-medium shadow-lg",children:"Започни чат"}),(0,s.jsx)("div",{className:"mt-8 p-4 bg-indigo-500/10 rounded-lg border border-indigo-400/30",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:(null==L?void 0:null===(o=L.businessName)||void 0===o?void 0:o.charAt(0).toUpperCase())||"Т"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsxs)("p",{className:"text-sm text-white font-medium mb-1",children:[(null==L?void 0:L.businessName)||"Техник"," - ",(null==L?void 0:L.serviceCategory)==="electrician"?"Електротехник":"Техник"]}),(0,s.jsx)("p",{className:"text-sm text-indigo-200",children:"Здравейте! Готов съм да ви помогна с вашия проблем."})]})]})})]})})})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 flex items-center justify-center",children:(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-md p-8 rounded-lg shadow-xl border border-white/20 max-w-md w-full mx-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Невалидна връзка"}),(0,s.jsx)("p",{className:"text-indigo-200 mb-4",children:(null==u?void 0:u.error)||"Тази връзка вече не е активна или е изтекла."}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-indigo-500 to-pink-500 text-white py-2 px-4 rounded-md hover:from-indigo-600 hover:to-pink-600 transition-all shadow-lg",children:"Опитайте отново"}),(0,s.jsx)("p",{className:"text-sm text-indigo-300",children:"Ако проблемът продължава, моля обадете се отново."})]})]})})})}}},function(e){e.O(0,[301,971,117,744],function(){return e(e.s=2744)}),_N_E=e.O()}]);
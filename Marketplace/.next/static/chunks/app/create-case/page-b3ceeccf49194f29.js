(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[452],{8831:function(e,t,s){Promise.resolve().then(s.bind(s,6943))},6943:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(7437),l=s(2265),a=s(9376),i=s(4362),n=s(1819),d=s(2834),o=s(5533),c=s(1396),m=s(1837);function x(){let e=(0,a.useRouter)(),{user:t,isAuthenticated:s}=(0,i.a)(),[x,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s||e.push("/auth/login")},[s,e]),(0,l.useEffect)(()=>{s&&u(!0)},[s]);let h=async s=>{try{var r,l;let a={...s,providerId:null,providerName:null,isOpenCase:!0,customerId:null==t?void 0:t.id,category:s.serviceType||"general"};console.log("Creating open case with data:",a);let i=await m.x.createCase(a);if(null===(r=i.data)||void 0===r?void 0:r.success)u(!1),alert("Заявката е създадена и е достъпна за всички специалисти! Ще получите потвърждение скоро."),e.push("/dashboard");else throw Error((null===(l=i.data)||void 0===l?void 0:l.message)||"Failed to create case")}catch(e){console.error("Error creating case:",e),alert("Възникна грешка при създаването на заявката. Моля, опитайте отново.")}};return s?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-indigo-500/10 to-slate-500/10 rounded-lg blur-3xl"}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-gradient-to-br from-purple-500/10 to-slate-500/10 rounded-lg blur-3xl"})]}),(0,r.jsx)(n.Header,{}),(0,r.jsx)("main",{className:"relative z-10 container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"Създай нова заявка"}),(0,r.jsx)("p",{className:"text-xl text-slate-300 mb-8",children:"Опишете услугата, която търсите и ние ще ви свържем с подходящи майстори"})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-xl shadow-xl border border-white/20 p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Как работи?"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 border border-blue-400/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDD"})}),(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"1. Опишете проблема"}),(0,r.jsx)("p",{className:"text-slate-300 text-sm",children:"Разкажете какво точно ви трябва и кога"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500/20 to-emerald-500/20 border border-green-400/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"})}),(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"2. Получете оферти"}),(0,r.jsx)("p",{className:"text-slate-300 text-sm",children:"Специалистите ще ви изпратят своите предложения"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-400/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-2xl",children:"✅"})}),(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"3. Изберете най-добрия"}),(0,r.jsx)("p",{className:"text-slate-300 text-sm",children:"Сравнете офертите и изберете подходящия майстор"})]})]})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:()=>u(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-4 px-8 rounded-lg hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-lg font-medium",children:"\uD83D\uDCCB Създай заявка сега"})})]})}),(0,r.jsx)(d.$,{}),(0,r.jsx)(o.Z,{isOpen:x,onClose:()=>{u(!1),e.push("/")},onSubmit:h,providerName:"Всички специалисти",providerId:void 0,providerCategory:"general",customerPhone:(null==t?void 0:t.phoneNumber)||"",mode:"direct"}),(0,r.jsx)(c.default,{})]}):null}}},function(e){e.O(0,[301,648,137,680,924,819,103,396,274,971,117,744],function(){return e(e.s=8831)}),_N_E=e.O()}]);
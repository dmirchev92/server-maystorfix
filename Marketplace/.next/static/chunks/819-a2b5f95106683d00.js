"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{1819:function(e,r,t){t.d(r,{Header:function(){return x}});var n=t(7437),s=t(4362),o=t(2265),a=t(7648),l=t(9376),i=t(3448),d=t(337),c=t(8711),h=t(6334);let u=e=>{let{user:r,unreadCount:t=0,onLogout:s}=e,[u,b]=(0,o.useState)(!1),[x,m]=(0,o.useState)(!1);(0,l.useRouter)();let p=[{href:"/",label:"Начало",icon:"\uD83C\uDFE0"},{href:"/search",label:"Търсене",icon:"\uD83D\uDD0D"},{href:"/create-case",label:"Нова заявка",icon:"➕"},...(null==r?void 0:r.role)==="tradesperson"||(null==r?void 0:r.role)==="service_provider"?[{href:"/dashboard",label:"Табло",icon:"\uD83D\uDCCA"}]:[]],f=[...(null==r?void 0:r.role)==="tradesperson"||(null==r?void 0:r.role)==="service_provider"?[{href:"/dashboard",label:"Моето табло",icon:"\uD83D\uDCCA"},{href:"/referrals",label:"Препоръки",icon:"\uD83C\uDFAF"}]:[],{href:"/notifications",label:"Известия",icon:"\uD83D\uDD14",badge:t},...(null==r?void 0:r.role)==="tradesperson"||(null==r?void 0:r.role)==="service_provider"?[{href:"/settings/sms",label:"SMS Настройки",icon:"\uD83D\uDCF1"}]:[],{href:"/settings",label:"Настройки",icon:"⚙️"}];return(0,n.jsxs)("nav",{className:"bg-gradient-to-r from-slate-900 via-slate-800 to-indigo-900/90 text-slate-100 backdrop-blur-md border-b border-white/10 sticky top-0 z-50 shadow-lg",children:[(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsxs)(a.default,{href:"/",className:"flex items-center space-x-2 group",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-white/10 border border-white/20 rounded-lg flex items-center justify-center transform group-hover:scale-110 transition-transform duration-200",children:(0,n.jsx)("span",{className:"text-white font-bold text-sm",children:"\uD83D\uDD27"})}),(0,n.jsx)("span",{className:"text-xl font-bold text-white",children:"ServiceText Pro"})]}),(0,n.jsx)("div",{className:"hidden md:flex items-center space-x-1",children:p.map(e=>(0,n.jsxs)(a.default,{href:e.href,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-slate-200 hover:text-white hover:bg-white/10 transition-all duration-200 group",children:[(0,n.jsx)("span",{className:"group-hover:scale-110 transition-transform duration-200",children:e.icon}),(0,n.jsx)("span",{className:"font-medium",children:e.label})]},e.href))}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[r?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{onClick:()=>m(!x),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-white/10 transition-all duration-200 group",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(d.q,{name:"".concat(r.firstName," ").concat(r.lastName),src:r.avatar,size:"sm",status:"online",showStatus:!0}),t>0&&(0,n.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 border-2 border-slate-900 rounded-full animate-pulse"})]}),(0,n.jsxs)("div",{className:"hidden sm:block text-left",children:[(0,n.jsxs)("p",{className:"text-sm font-medium text-white",children:[r.firstName," ",r.lastName]}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("span",{className:(0,i.cn)("text-xs px-2 py-0.5 rounded-full font-medium","tradesperson"===r.role||"service_provider"===r.role?"bg-indigo-500/20 text-indigo-300 border border-indigo-400/30":"bg-emerald-500/20 text-emerald-300 border border-emerald-400/30"),children:"tradesperson"===r.role||"service_provider"===r.role?"Изпълнител":"Клиент"})})]}),(0,n.jsx)("svg",{className:(0,i.cn)("w-4 h-4 text-slate-300 transition-transform duration-200",x&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-slate-900/95 backdrop-blur-md rounded-xl shadow-2xl border border-white/10 py-2 z-50",children:[(0,n.jsxs)("div",{className:"px-4 py-3 border-b border-white/10",children:[(0,n.jsxs)("p",{className:"text-sm font-medium text-white",children:[r.firstName," ",r.lastName]}),(0,n.jsx)("p",{className:"text-xs text-slate-300",children:r.email})]}),f.map(e=>(0,n.jsxs)(a.default,{href:e.href,className:"flex items-center justify-between px-4 py-2 text-sm text-slate-200 hover:bg-white/10 hover:text-white transition-colors duration-200",onClick:()=>m(!1),children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("span",{children:e.icon}),(0,n.jsx)("span",{children:e.label})]}),e.badge&&e.badge>0&&(0,n.jsx)(c.Ct,{variant:"error",size:"sm",children:e.badge})]},e.href)),(0,n.jsx)("div",{className:"border-t border-white/10 mt-2 pt-2",children:(0,n.jsxs)("button",{onClick:()=>{m(!1),null==s||s()},className:"flex items-center space-x-3 w-full px-4 py-2 text-sm text-red-400 hover:bg-red-500/10 transition-colors duration-200",children:[(0,n.jsx)("span",{children:"\uD83D\uDEAA"}),(0,n.jsx)("span",{children:"Изход"})]})})]})]}):(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(a.default,{href:"/auth/login",children:(0,n.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>{console.log("\uD83D\uDD18 Вход button clicked")},children:"Вход"})}),(0,n.jsx)(a.default,{href:"/auth/register",children:(0,n.jsx)(h.z,{variant:"primary",size:"sm",onClick:()=>{console.log("\uD83D\uDD18 Регистрация button clicked")},children:"Регистрация"})})]}),(0,n.jsx)("button",{onClick:()=>b(!u),className:"md:hidden p-2 rounded-lg text-slate-300 hover:text-white hover:bg-white/10 transition-colors duration-200",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),u&&(0,n.jsx)("div",{className:"md:hidden border-t border-white/10 py-4",children:(0,n.jsx)("div",{className:"space-y-2",children:p.map(e=>(0,n.jsxs)(a.default,{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-slate-200 hover:text-white hover:bg-white/10 transition-colors duration-200",onClick:()=>b(!1),children:[(0,n.jsx)("span",{children:e.icon}),(0,n.jsx)("span",{className:"font-medium",children:e.label})]},e.href))})})]}),(u||x)&&(0,n.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>{b(!1),m(!1)}})]})};var b=t(1837);function x(){let{user:e,isAuthenticated:r,logout:t}=(0,s.a)(),a=(0,l.useRouter)(),[i,d]=(0,o.useState)(0);return(0,o.useEffect)(()=>{if(!r||!e)return;let t=async()=>{try{var r,t;console.log("\uD83D\uDD14 Fetching unread notification count for user:",null==e?void 0:e.id);let n=await b.x.getUnreadNotificationCount();if(console.log("\uD83D\uDD14 Unread count response:",n.data),null===(r=n.data)||void 0===r?void 0:r.success){let e=(null===(t=n.data.data)||void 0===t?void 0:t.count)||0;console.log("\uD83D\uDD14 Setting unread count to:",e),d(e)}else console.warn("\uD83D\uDD14 Unread count response not successful:",n.data)}catch(e){console.error("❌ Error fetching unread count:",e)}};t();let n=setInterval(t,3e4);return()=>clearInterval(n)},[r,e]),(0,n.jsx)(u,{user:e?{id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,role:e.role,avatar:e.profileImageUrl||void 0}:void 0,unreadCount:i,onLogout:()=>{t(),a.push("/")}})}},337:function(e,r,t){t.d(r,{q:function(){return a}});var n=t(7437);t(2265);var s=t(3448);let o={xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg",xl:"h-16 w-16 text-xl","2xl":"h-20 w-20 text-2xl"},a=e=>{let{src:r,alt:t,name:a="",size:l="md",variant:i="circular",status:d,showStatus:c=!1,className:h,onClick:u}=e,b=a.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),x=(e=>{let r=["from-purple-400 to-purple-600","from-blue-400 to-blue-600","from-green-400 to-green-600","from-yellow-400 to-yellow-600","from-red-400 to-red-600","from-indigo-400 to-indigo-600","from-pink-400 to-pink-600","from-teal-400 to-teal-600"];return r[Math.abs(e.split("").reduce((e,r)=>r.charCodeAt(0)+((e<<5)-e),0))%r.length]})(a);return(0,n.jsxs)("div",{className:"relative inline-block",children:[(0,n.jsxs)("div",{className:(0,s.cn)("\n    relative inline-flex items-center justify-center\n    font-medium text-white\n    transition-all duration-300 ease-in-out\n    ".concat(u?"cursor-pointer hover:scale-105 hover:shadow-lg":"","\n  "),o[l],{circular:"rounded-full",rounded:"rounded-lg",square:"rounded-md"}[i],r?"overflow-hidden":"bg-gradient-to-br ".concat(x),"ring-2 ring-white shadow-lg",h),onClick:u,children:[r?(0,n.jsx)("img",{src:r,alt:t||a,className:"h-full w-full object-cover",onError:e=>{e.target.style.display="none"}}):(0,n.jsx)("span",{className:"font-semibold select-none",children:b||"?"}),!r&&(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/10 to-black/20 rounded-inherit"})]}),c&&d&&(0,n.jsx)("div",{className:(0,s.cn)("absolute bottom-0 right-0 rounded-full border-2 border-white",{xs:"h-1.5 w-1.5",sm:"h-2 w-2",md:"h-2.5 w-2.5",lg:"h-3 w-3",xl:"h-3.5 w-3.5","2xl":"h-4 w-4"}[l],{online:"bg-green-400 border-green-500",offline:"bg-gray-400 border-gray-500",away:"bg-yellow-400 border-yellow-500",busy:"bg-red-400 border-red-500"}[d])})]})}},8711:function(e,r,t){t.d(r,{Ct:function(){return a},OE:function(){return l}});var n=t(7437),s=t(2265),o=t(3448);let a=s.forwardRef((e,r)=>{let{className:t,variant:s="default",size:a="md",icon:l,children:i,...d}=e;return(0,n.jsxs)("div",{className:(0,o.cn)("\n      inline-flex items-center gap-1 font-medium rounded-full\n      transition-all duration-200 ease-in-out\n      border\n    ",{default:"\n        bg-white/10 text-slate-200 border-white/20 backdrop-blur-sm\n        hover:bg-white/20\n      ",primary:"\n        bg-indigo-500/20 text-indigo-300 border-indigo-400/30 backdrop-blur-sm\n        hover:bg-indigo-500/30\n      ",success:"\n        bg-green-500/20 text-green-300 border-green-400/30 backdrop-blur-sm\n        hover:bg-green-500/30\n      ",warning:"\n        bg-yellow-500/20 text-yellow-300 border-yellow-400/30 backdrop-blur-sm\n        hover:bg-yellow-500/30\n      ",error:"\n        bg-red-500/20 text-red-300 border-red-400/30 backdrop-blur-sm\n        hover:bg-red-500/30\n      ",info:"\n        bg-blue-500/20 text-white border-blue-400/30 backdrop-blur-sm\n        hover:bg-blue-500/30\n      ",outline:"\n        bg-transparent text-slate-300 border-white/30 backdrop-blur-sm\n        hover:bg-white/5\n      ",construction:"\n        bg-indigo-600/80 text-white border-transparent backdrop-blur-sm\n        hover:bg-indigo-600\n        shadow-sm hover:shadow-md\n      ",professional:"\n        bg-white/20 text-white border-white/30 backdrop-blur-sm\n        hover:bg-white/30\n        shadow-sm hover:shadow-md\n      "}[s],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[a],t),ref:r,...d,children:[l&&(0,n.jsx)("span",{className:"flex-shrink-0",children:l}),(0,n.jsx)("span",{children:i})]})});a.displayName="Badge";let l=e=>{let{status:r,size:t="md",className:s}=e,o={open:{variant:"success",icon:"\uD83D\uDFE2",label:"Отворена"},wip:{variant:"warning",icon:"⚡",label:"В процес"},closed:{variant:"default",icon:"✅",label:"Затворена"},pending:{variant:"info",icon:"⏳",label:"Чакаща"},accepted:{variant:"success",icon:"✅",label:"Приета"},declined:{variant:"error",icon:"❌",label:"Отказана"},completed:{variant:"default",icon:"\uD83C\uDFC1",label:"Завършена"}}[r]||{variant:"default",icon:"❓",label:r||"Неизвестен"};return(0,n.jsx)(a,{variant:o.variant,size:t,className:s,icon:(0,n.jsx)("span",{children:o.icon}),children:o.label})}},6334:function(e,r,t){t.d(r,{z:function(){return a}});var n=t(7437),s=t(2265),o=t(3448);let a=s.forwardRef((e,r)=>{let{className:t,variant:s="primary",size:a="md",isLoading:l=!1,leftIcon:i,rightIcon:d,children:c,disabled:h,...u}=e;return(0,n.jsx)("button",{className:(0,o.cn)("\n      inline-flex items-center justify-center gap-2 font-medium rounded-lg\n      transition-all duration-300 ease-in-out transform\n      focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500\n      disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\n      active:scale-95 hover:scale-105\n    ",{primary:"\n        bg-indigo-600/80 text-white\n        hover:bg-indigo-600\n        shadow-lg hover:shadow-xl\n        border border-transparent\n      ",secondary:"\n        bg-white/10 text-slate-200 border border-white/20\n        hover:bg-white/20 hover:border-white/30\n        shadow-sm hover:shadow-md backdrop-blur-sm\n      ",outline:"\n        bg-transparent text-slate-300 border-2 border-white/30\n        hover:bg-white/10 hover:text-white hover:border-white/50\n        shadow-sm hover:shadow-lg backdrop-blur-sm\n      ",ghost:"\n        bg-transparent text-slate-200 border border-transparent\n        hover:bg-white/10 hover:text-white\n      ",construction:"\n        bg-indigo-600/80 text-white\n        hover:bg-indigo-600\n        shadow-lg hover:shadow-xl\n        border border-transparent\n        font-semibold\n      ",professional:"\n        bg-white/20 text-white backdrop-blur-sm\n        hover:bg-white/30\n        shadow-lg hover:shadow-xl\n        border border-white/30\n      ",industrial:"\n        bg-gradient-to-r from-indigo-600/80 via-slate-600/80 to-purple-600/80 text-white\n        hover:from-indigo-600 hover:via-slate-600 hover:to-purple-600\n        shadow-lg hover:shadow-2xl\n        border border-transparent backdrop-blur-sm\n        relative overflow-hidden\n        before:absolute before:inset-0 before:bg-gradient-to-r \n        before:from-white/10 before:to-transparent before:opacity-0\n        hover:before:opacity-100 before:transition-opacity before:duration-300\n      "}[s],{sm:"px-3 py-1.5 text-sm h-8",md:"px-4 py-2 text-sm h-10",lg:"px-6 py-3 text-base h-12",xl:"px-8 py-4 text-lg h-14"}[a],l&&"cursor-wait",t),disabled:h||l,ref:r,...u,children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Зареждане..."]}):(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)("span",{className:"flex-shrink-0",children:i}),(0,n.jsx)("span",{children:c}),d&&(0,n.jsx)("span",{className:"flex-shrink-0",children:d})]})})});a.displayName="Button"},3448:function(e,r,t){t.d(r,{cn:function(){return o}});var n=t(1994),s=t(3335);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}}}]);
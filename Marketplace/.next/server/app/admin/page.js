(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5654:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>n}),t(4753),t(9468),t(5866);var r=t(3191),a=t(8716),i=t(7922),l=t.n(i),d=t(5231),c={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);t.d(s,c);let n=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4753)),"/var/www/servicetextpro/Marketplace/src/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9468)),"/var/www/servicetextpro/Marketplace/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/var/www/servicetextpro/Marketplace/src/app/admin/page.tsx"],m="/admin/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},5695:(e,s,t)=>{Promise.resolve().then(t.bind(t,4189))},4189:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(326),a=t(7577),i=t(4001),l=t(5047),d=t(4464),c=t(872);function n(){let{user:e,isAuthenticated:s,isLoading:t}=(0,i.a)(),n=(0,l.useRouter)(),[o,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(!0),[g,b]=(0,a.useState)(null),j=async()=>{try{p(!0),b(null);let e=localStorage.getItem("auth_token");if(!e){b("No authentication token found");return}console.log("\uD83D\uDCCA Loading real admin data...");let s=await d.Z.get("http://192.168.0.129:3000/api/v1/admin/security/dashboard",{headers:{Authorization:`Bearer ${e}`}});if(s.data.success){let e=s.data;console.log("✅ Enhanced security dashboard loaded:",e),x({totalUsers:e.overview?.totalThreats||0,activeUsers:e.systemMetrics?.activeConnections||0,smsBlocked:e.overview?.blockedThreats||0,smsAllowed:e.overview?.threats24h||0,uptime:e.systemMetrics?.uptime||0}),m(e.recentThreats||[])}else{let s=await d.Z.get("http://192.168.0.129:3000/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${e}`}});if(s.data.success){let e=s.data.data;x(e.systemStats||{totalUsers:0,activeUsers:0,smsBlocked:0,smsAllowed:0,uptime:0}),m(e.securityAlerts||[])}}}catch(e){console.error("❌ Error loading admin data:",e),b(e.response?.data?.error?.message||e.message)}finally{p(!1)}},y=(e,s)=>{let t={id:Date.now().toString(),type:"MANUAL_TEST",severity:s,message:e,timestamp:new Date().toISOString()};m(e=>[t,...e.slice(0,9)])},v=async()=>{try{let e=localStorage.getItem("auth_token");if(!e){y("❌ No authentication token found","critical");return}console.log("\uD83E\uDDEA Testing SMS security with premium number...");let s=await d.Z.post("http://192.168.0.129:3000/api/v1/admin/security/test-sms",{phoneNumber:"0900123456",message:"Test premium number blocking"},{headers:{Authorization:`Bearer ${e}`}});if(s.data.success){let e=s.data.data.testResult;e.allowed?y("❌ SECURITY GAP: Premium number was NOT blocked!","critical"):(y("✅ SMS Security Working: Premium number blocked successfully!","low"),y(`🛡️ Security Details: ${e.reason}`,"low")),setTimeout(()=>{j()},1e3)}}catch(e){console.log("\uD83E\uDDEA SMS Security Test Result:",e.response?.data),e.response?.data?.error?.code==="SMS_BLOCKED"||e.response?.status===403?(y("✅ SMS Security Working: Premium number blocked successfully!","low"),setTimeout(()=>{j()},1e3)):y(`❌ Test error: ${e.response?.data?.error?.message||e.message}`,"medium")}};if(t)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})});let N=e?.role==="admin";return s&&N?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(c.Header,{}),r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDC51 Admin Panel"}),r.jsx("p",{className:"text-gray-600",children:"Security & User Management"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"text-sm text-green-600 font-medium",children:"\uD83D\uDEE1️ System Secure"}),r.jsx("button",{onClick:()=>n.push("/"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Back to App"})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"\uD83D\uDC65"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.activeUsers})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"\uD83D\uDEAB"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"SMS Blocked"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.smsBlocked})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"✅"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"SMS Allowed"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.smsAllowed})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"\uD83D\uDD12"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Security Level"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:"HIGH"})]})]})})]}),h&&!u&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(e=>r.jsx("div",{className:"bg-white p-6 rounded-lg shadow animate-pulse",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("div",{className:"h-4 bg-gray-300 rounded w-20 mb-2"}),r.jsx("div",{className:"h-8 bg-gray-300 rounded w-16"})]})]})},e))}),g&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-8",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"text-red-400",children:"⚠️"}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Data"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:g}),r.jsx("button",{onClick:j,className:"mt-2 text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200",children:"Retry"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uD83D\uDEA8 Security Alerts"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Real-time security monitoring"})]}),r.jsx("button",{onClick:j,className:"text-sm bg-gray-100 text-gray-700 px-3 py-1 rounded hover:bg-gray-200",children:"\uD83D\uDD04 Refresh"})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"space-y-4",children:o.map(e=>r.jsx("div",{className:`p-4 rounded-lg border ${"critical"===e.type?"bg-red-50 border-red-200":"warning"===e.type?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:"font-medium",children:e.message}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})},e.id))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"⚡ Admin Actions"}),r.jsx("p",{className:"text-sm text-gray-600",children:"System management tools"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[r.jsx("button",{onClick:()=>y("\uD83D\uDD0D Manual security scan initiated","low"),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 flex items-center justify-center",children:"\uD83D\uDD0D Run Security Scan"}),r.jsx("button",{onClick:()=>y("\uD83D\uDCCA System statistics updated","low"),className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 flex items-center justify-center",children:"\uD83D\uDCCA Update Statistics"}),r.jsx("button",{onClick:()=>y("\uD83D\uDEA8 Test alert generated","medium"),className:"w-full bg-yellow-600 text-white py-3 px-4 rounded-lg hover:bg-yellow-700 flex items-center justify-center",children:"\uD83D\uDEA8 Test Alert System"}),r.jsx("button",{onClick:()=>y("\uD83D\uDEE1️ Security protocols activated","critical"),className:"w-full bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 flex items-center justify-center",children:"\uD83D\uDEE1️ Emergency Protocol"}),(0,r.jsxs)("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"\uD83E\uDDEA Test SMS Security"}),r.jsx("button",{onClick:v,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 flex items-center justify-center",children:"\uD83D\uDEAB Test Premium Number Block"})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uD83D\uDCBB System Information"})}),r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDD12 Security Status"}),r.jsx("p",{className:"text-green-600 font-medium",children:"✅ All systems secure"}),r.jsx("p",{className:"text-sm text-gray-600",children:"3-layer SMS protection active"})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCF1 SMS Protection"}),r.jsx("p",{className:"text-blue-600 font-medium",children:"\uD83D\uDEE1️ Layer 1, 2, 3 Active"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Premium numbers blocked"})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"⚡ System Health"}),r.jsx("p",{className:"text-green-600 font-medium",children:"\uD83D\uDFE2 Operational"}),r.jsx("p",{className:"text-sm text-gray-600",children:"All services running"})]})]})})]})]})]}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDD12"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600",children:"Admin privileges required"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:s?`Current role: ${e?.role||"unknown"}`:"Please log in first"})]})})}},4753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/var/www/servicetextpro/Marketplace/src/app/admin/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,867,325,673,872],()=>t(5654));module.exports=r})();
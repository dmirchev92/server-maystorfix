(()=>{var e={};e.id=427,e.ids=[427],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},2969:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>u,tree:()=>n}),t(3624),t(9468),t(5866);var r=t(3191),a=t(8716),i=t(7922),l=t.n(i),d=t(5231),c={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);t.d(s,c);let n=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3624)),"/var/www/servicetextpro/Marketplace/src/app/admin/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9468)),"/var/www/servicetextpro/Marketplace/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],x=["/var/www/servicetextpro/Marketplace/src/app/admin/dashboard/page.tsx"],o="/admin/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},6809:(e,s,t)=>{Promise.resolve().then(t.bind(t,5426))},5426:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(326),a=t(7577),i=t(4001),l=t(5047),d=t(4464),c=t(872);function n(){let{user:e,isAuthenticated:s}=(0,i.a)(),t=(0,l.useRouter)(),[n,x]=(0,a.useState)(!0),[o,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(null),[p,g]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),b=async(e,s)=>{try{let t=localStorage.getItem("auth_token");(await d.Z.put(`http://192.168.0.129:3000/api/v1/admin/users/${e}/status`,{isActive:!s},{headers:{Authorization:`Bearer ${t}`}})).data.success&&(g(p.map(t=>t.id===e?{...t,is_active:!s}:t)),f(`✅ User ${s?"disabled":"enabled"} successfully`))}catch(e){console.error("❌ Error toggling user status:",e),alert("Error updating user status: "+(e.response?.data?.error?.message||e.message))}},N=async e=>{try{let s=localStorage.getItem("auth_token"),t=await d.Z.get(`http://192.168.0.129:3000/api/v1/admin/users/${e}/settings`,{headers:{Authorization:`Bearer ${s}`}});if(t.data.success){let e=t.data.data;alert(`User Settings for ${e.user.email}:

SMS Enabled: ${e.smsSettings.isEnabled}
SMS Count: ${e.smsStats.totalCount}
Success Rate: ${e.smsStats.successRate}%

⚠️ User has been notified of admin access.`)}}catch(e){console.error("❌ Error viewing user settings:",e),alert("Error accessing user settings: "+(e.response?.data?.error?.message||e.message))}},f=e=>{v(s=>[e,...s.slice(0,4)]),setTimeout(()=>{v(s=>s.filter(s=>s!==e))},5e3)},y=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}};return n?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(c.Header,{}),r.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:j.map((e,s)=>r.jsx("div",{className:"bg-purple-600 text-white px-4 py-2 rounded-lg shadow-lg animate-slide-in-right",children:e},s))}),r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDC51 Admin Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome, ",e?.firstName," ",e?.lastName]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"text-sm text-gray-500",children:"\uD83D\uDD12 Security Level: HIGH"}),r.jsx("button",{onClick:()=>t.push("/"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Back to App"})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm",children:"\uD83D\uDC65"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.totalUsers})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm",children:"✅"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.activeUsers})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm",children:"\uD83D\uDEAB"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"SMS Blocked"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.smsBlocked})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm",children:"\uD83D\uDCF1"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"SMS Allowed"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.smsAllowed})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uD83D\uDEA8 Security Alerts"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Real-time security monitoring"})]}),r.jsx("div",{className:"p-6",children:0===o.length?(0,r.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[r.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDEE1️"}),r.jsx("p",{children:"No security alerts"}),r.jsx("p",{className:"text-sm",children:"System is secure"})]}):r.jsx("div",{className:"space-y-4",children:o.slice(0,5).map(e=>r.jsx("div",{className:`p-4 rounded-lg border ${y(e.severity)}`,children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.message}),(0,r.jsxs)("p",{className:"text-sm opacity-75",children:["User: ",e.userId]}),r.jsx("p",{className:"text-xs opacity-50",children:new Date(e.timestamp).toLocaleString()})]}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y(e.severity)}`,children:e.severity.toUpperCase()})]})},e.id))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uD83D\uDC65 User Management"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Manage user accounts"})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:p.slice(0,10).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${e.is_active?"bg-green-500":"bg-red-500"}`}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium",children:[e.first_name," ",e.last_name]}),r.jsx("p",{className:"text-sm text-gray-600",children:e.email}),r.jsx("p",{className:"text-xs text-gray-500",children:e.role})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>N(e.id),className:"text-blue-600 hover:text-blue-800 text-sm",children:"View Settings"}),"admin"!==e.role&&r.jsx("button",{onClick:()=>b(e.id,e.is_active),className:`text-sm ${e.is_active?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"}`,children:e.is_active?"Disable":"Enable"})]})]},e.id))})})]})]})]})]})}},3624:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/var/www/servicetextpro/Marketplace/src/app/admin/dashboard/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,867,325,673,872],()=>t(2969));module.exports=r})();
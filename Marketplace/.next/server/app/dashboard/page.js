(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7572:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(8256),s(9468),s(5866);var r=s(3191),a=s(8716),n=s(7922),o=s.n(n),l=s(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8256)),"/var/www/servicetextpro/Marketplace/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9468)),"/var/www/servicetextpro/Marketplace/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/var/www/servicetextpro/Marketplace/src/app/dashboard/page.tsx"],x="/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3394:(e,t,s)=>{Promise.resolve().then(s.bind(s,9530))},9530:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(326),a=s(7577),n=s(4001),o=s(5047),l=s(434),i=s(8069),d=s(5329),c=s(872);function x(){let{user:e,isAuthenticated:t,isLoading:s,logout:x}=(0,n.a)();(0,o.useRouter)();let[h,p]=(0,a.useState)(null),[g,b]=(0,a.useState)({isOpen:!1,method:"",transactions:[]}),[v,j]=(0,a.useState)({isOpen:!1,month:"",transactions:[]}),[f,N]=(0,a.useState)(!1),[y,w]=(0,a.useState)(""),[D,C]=(0,a.useState)(!1),[k,B]=(0,a.useState)([]),[_,F]=(0,a.useState)(new Date().getFullYear()),G=async()=>{try{if(e?.role==="tradesperson"||e?.role==="service_provider"){let t=`${_}-01-01`,s=`${_}-12-31`,r=await i.x.getIncomeStats(e.id,t,s);if(r.data?.success){p(r.data.data);let e=new Date().getMonth();11===e&&N(!0)}}}catch(e){console.error("Error fetching income stats:",e)}},M=()=>{if(!h)return;let e="data:text/csv;charset=utf-8,%EF%BB%BF";e+=`=== ОБЩ ОТЧЕТ ЗА ПРИХОДИ ===\\n\\nОбщо приходи:,${h.summary?.totalIncome?.toFixed(2)} BGN\\nБрой заявки:,${h.summary?.incomeCount}\\nСредно на заявка:,${h.summary?.averageIncome?.toFixed(2)} BGN\\n\\n=== МЕСЕЧНА РАЗБИВКА ===\\n\\n`,h.monthlyIncome?.forEach(t=>{let s=new Date(t.month+"-01").toLocaleDateString("bg-BG",{month:"long",year:"numeric"});e+=`--- ${s} ---\\nОбщо приходи:,${t.total?.toFixed(2)} BGN\\nБрой заявки:,${t.count}\\nСредно на заявка:,${t.average?.toFixed(2)} BGN\\n\\n`}),e+="=== ОБОБЩЕНА ТАБЛИЦА ===\\nМесец,Общо приходи (BGN),Брой заявки,Средно (BGN)\\n",h.monthlyIncome?.forEach(t=>{let s=new Date(t.month+"-01").toLocaleDateString("bg-BG",{month:"long",year:"numeric"});e+=`${s},${t.total?.toFixed(2)},${t.count},${t.average?.toFixed(2)}\\n`}),e+="\\n=== ПО МЕТОД НА ПЛАЩАНЕ ===\\nМетод,Общо приходи (BGN),Брой заявки,Средно (BGN)\\n",h.paymentMethods?.forEach(t=>{let s=t.count>0?(t.total/t.count).toFixed(2):"0.00";e+=`${t.method},${t.total?.toFixed(2)},${t.count},${s}\\n`});let t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download",`income_report_${_}.csv`),document.body.appendChild(s),s.click(),document.body.removeChild(s)},I=async t=>{try{let s=await i.x.getIncomeTransactionsByMethod(e.id,t);s.data?.success&&b({isOpen:!0,method:t,transactions:s.data.data||[]})}catch(e){console.error("Error fetching transactions:",e),alert("Възникна грешка при зареждането на транзакциите")}},q=async t=>{try{let s=await i.x.getIncomeTransactionsByMonth(e.id,t);s.data?.success&&j({isOpen:!0,month:t,transactions:s.data.data||[]})}catch(e){console.error("Error fetching month transactions:",e),alert("Възникна грешка при зареждането на транзакциите")}};return s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-white/30 mx-auto"}),r.jsx("p",{className:"mt-4 text-slate-200",children:"Табло????..."})]})}):t&&e?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900",children:[r.jsx(c.Header,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Табло"}),(0,r.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[r.jsx(l.default,{href:"/dashboard",className:"px-6 py-3 font-medium text-white border-b-2 border-green-500 bg-slate-800/50",children:"Преглед"}),r.jsx(l.default,{href:"/dashboard/cases",className:"px-6 py-3 font-medium text-slate-400 hover:text-slate-200 hover:bg-slate-800/30",children:"Заявки"})]})]}),h&&(0,r.jsxs)(d.Zb,{className:"mb-6 bg-gradient-to-br from-slate-800/90 to-slate-900/90 backdrop-blur-sm border-2 border-green-500/30 shadow-xl",children:[r.jsx(d.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2 text-white",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCB0"}),r.jsx("span",{children:"Приходи"})]}),(0,r.jsxs)("button",{onClick:M,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 text-sm font-medium",children:[r.jsx("span",{children:"\uD83D\uDCE5"}),r.jsx("span",{children:"Изтегли отчет"})]})]})}),(0,r.jsxs)(d.aY,{children:[f&&r.jsx("div",{className:"mb-6 bg-gradient-to-r from-orange-500/20 to-red-500/20 border-2 border-orange-400/50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:"⚠️"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-orange-300 font-bold mb-1",children:"Внимание: Край на годината"}),r.jsx("p",{className:"text-slate-300 text-sm mb-3",children:"Всички данни за приходите ще бъдат изтрити на 1 януари. Моля изтеглете вашия годишен отчет преди края на декември."}),r.jsx("button",{onClick:M,className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors text-sm font-medium",children:"\uD83D\uDCE5 Изтегли годишен отчет сега"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[h.monthlyIncome&&h.monthlyIncome.length>0&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 p-4 rounded-lg border border-purple-400/30",children:[r.jsx("div",{className:"text-sm text-slate-300 mb-2",children:"Избран месец"}),r.jsx("select",{value:y||h.monthlyIncome[0]?.month,onChange:e=>w(e.target.value),className:"w-full mb-3 px-2 py-1 bg-slate-700 text-slate-200 rounded border border-purple-400/30 text-xs focus:outline-none focus:border-purple-400",children:h.monthlyIncome.map(e=>r.jsx("option",{value:e.month,children:new Date(e.month+"-01").toLocaleDateString("bg-BG",{month:"long",year:"numeric"})},e.month))}),(()=>{let e=h.monthlyIncome.find(e=>e.month===(y||h.monthlyIncome[0]?.month));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-400",children:[e?.total?.toFixed(2)||"0.00"," ",h.summary?.currency||"BGN"]}),(0,r.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:[e?.count||0," заявки • Средно: ",e?.average?.toFixed(2)||"0.00"," BGN"]})]})})()]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 p-4 rounded-lg border border-green-400/30",children:[r.jsx("div",{className:"text-sm text-slate-300 mb-2",children:"Общо приходи"}),k.length>0&&r.jsx("select",{value:_,onChange:e=>F(parseInt(e.target.value)),className:"w-full mb-3 px-2 py-1 bg-slate-700 text-slate-200 rounded border border-green-400/30 text-xs focus:outline-none focus:border-green-400",children:k.map(e=>(0,r.jsxs)("option",{value:e,children:[e," г."]},e))}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[h.summary?.totalIncome?.toFixed(2)||"0.00"," ",h.summary?.currency||"BGN"]}),(0,r.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:[h.summary?.incomeCount||0," заявки • Средно: ",h.summary?.averageIncome?.toFixed(2)||"0.00"," BGN"]})]})]}),h.monthlyIncome&&h.monthlyIncome.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Месечна разбивка"}),h.monthlyIncome.length>1&&(0,r.jsxs)("select",{value:D?"all":"current",onChange:e=>C("all"===e.target.value),className:"px-3 py-1 bg-slate-700 text-slate-200 rounded border border-slate-600 text-xs focus:outline-none focus:border-green-500",children:[r.jsx("option",{value:"current",children:"Текущ месец"}),(0,r.jsxs)("option",{value:"all",children:["Всички месеци (",h.monthlyIncome.length,")"]})]})]}),r.jsx("div",{className:"space-y-2",children:(D?h.monthlyIncome.slice(0,12):h.monthlyIncome.slice(0,1)).map(e=>(0,r.jsxs)("button",{onClick:()=>q(e.month),className:"w-full flex items-center justify-between p-3 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg border border-slate-700/50 hover:border-green-500/50 transition-all cursor-pointer group",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-slate-300 group-hover:text-green-300 transition-colors",children:new Date(e.month+"-01").toLocaleDateString("bg-BG",{month:"long",year:"numeric"})}),(0,r.jsxs)("span",{className:"text-xs text-slate-400 group-hover:text-slate-300 transition-colors",children:[e.count," заявки"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm font-bold text-green-400 group-hover:text-green-300 transition-colors",children:[e.total?.toFixed(2)," BGN"]}),r.jsx("span",{className:"text-xs text-green-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46"})]})]},e.month))})]}),h.paymentMethods&&h.paymentMethods.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"По метод на плащане (кликнете за детайли)"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:(()=>{let e={cash:"\uD83D\uDCB5 Кеш",card:"\uD83D\uDCB3 Картово плащане",bank_transfer:"\uD83C\uDFE6 Банков път",online:"\uD83C\uDF10 Revolut",other:"\uD83D\uDCDD Друго"};return[...h.paymentMethods].sort((e,t)=>t.total-e.total).map(t=>(0,r.jsxs)("button",{onClick:()=>I(t.method),className:"p-3 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg text-center border border-slate-700/50 hover:border-green-500/50 transition-all cursor-pointer group",children:[r.jsx("div",{className:"text-xs text-slate-400 group-hover:text-green-400 mb-1 transition-colors",children:e[t.method]||t.method}),(0,r.jsxs)("div",{className:"text-sm font-bold text-slate-200 group-hover:text-green-300 transition-colors",children:[t.total?.toFixed(2)," BGN"]}),(0,r.jsxs)("div",{className:"text-xs text-slate-500 group-hover:text-slate-400 transition-colors",children:[t.count," заявки"]}),r.jsx("div",{className:"text-xs text-green-400 opacity-0 group-hover:opacity-100 transition-opacity mt-1",children:"\uD83D\uDC46 Виж детайли"})]},t.method))})()})]})]})]})]}),g.isOpen&&r.jsx(m,{method:g.method,transactions:g.transactions,onClose:()=>b({isOpen:!1,method:"",transactions:[]}),onTransactionUpdated:()=>{G(),b({isOpen:!1,method:"",transactions:[]})}}),v.isOpen&&r.jsx(u,{month:v.month,transactions:v.transactions,onClose:()=>j({isOpen:!1,month:"",transactions:[]}),onTransactionUpdated:()=>{G(),j({isOpen:!1,month:"",transactions:[]})}})]}):null}function m({method:e,transactions:t,onClose:s,onTransactionUpdated:n}){let[o,l]=(0,a.useState)(null),[d,c]=(0,a.useState)({amount:"",paymentMethod:"",notes:""}),x=e=>{l(e),c({amount:e.amount.toString(),paymentMethod:e.payment_method||"",notes:e.notes||""})},m=async()=>{try{await i.x.updateIncomeTransaction(o.id,{amount:parseFloat(d.amount),paymentMethod:d.paymentMethod,notes:d.notes}),alert("Транзакцията беше обновена успешно!"),l(null),n()}catch(e){console.error("Error updating transaction:",e),alert("Възникна грешка при обновяването")}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6 rounded-t-lg sticky top-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold",children:["\uD83D\uDCB3 Транзакции: ",e]}),r.jsx("button",{onClick:s,className:"text-white/80 hover:text-white text-2xl",children:"✕"})]}),(0,r.jsxs)("p",{className:"text-green-100 mt-1",children:[t.length," транзакции"]})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[t.map(e=>r.jsx("div",{className:"bg-slate-700/50 border border-slate-600 rounded-lg p-4",children:o?.id===e.id?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Сума (BGN)"}),r.jsx("input",{type:"number",step:"0.01",value:d.amount,onChange:e=>c({...d,amount:e.target.value}),className:"w-full px-3 py-2 bg-slate-600 text-white rounded border border-slate-500 focus:border-green-500 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Метод на плащане"}),(0,r.jsxs)("select",{value:d.paymentMethod,onChange:e=>c({...d,paymentMethod:e.target.value}),className:"w-full px-3 py-2 bg-slate-600 text-white rounded border border-slate-500 focus:border-green-500 focus:outline-none",children:[r.jsx("option",{value:"cash",children:"\uD83D\uDCB5 Кеш"}),r.jsx("option",{value:"card",children:"\uD83D\uDCB3 Картово плащане"}),r.jsx("option",{value:"bank_transfer",children:"\uD83C\uDFE6 Банков път"}),r.jsx("option",{value:"online",children:"\uD83C\uDF10 Revolut"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Бележки"}),r.jsx("input",{type:"text",value:d.notes,onChange:e=>c({...d,notes:e.target.value}),className:"w-full px-3 py-2 bg-slate-600 text-white rounded border border-slate-500 focus:border-green-500 focus:outline-none",placeholder:"Допълнителни бележки..."})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded transition-colors",children:"✅ Запази"}),r.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded transition-colors",children:"✕ Отказ"})]})]}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-green-400",children:[e.amount.toFixed(2)," BGN"]}),r.jsx("span",{className:"text-sm text-slate-400",children:new Date(e.recorded_at).toLocaleDateString("bg-BG",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.case_description&&(0,r.jsxs)("p",{className:"text-sm text-slate-300 mb-1",children:["\uD83D\uDCCB ",e.case_description]}),e.notes&&(0,r.jsxs)("p",{className:"text-xs text-slate-400",children:["\uD83D\uDCAC ",e.notes]})]}),r.jsx("button",{onClick:()=>x(e),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors text-sm",children:"✏️ Редактирай"})]})},e.id)),0===t.length&&r.jsx("div",{className:"text-center py-8 text-slate-400",children:r.jsx("p",{children:"Няма транзакции за този метод на плащане"})})]})]})})}function u({month:e,transactions:t,onClose:s,onTransactionUpdated:n}){let[o,l]=(0,a.useState)(null),[d,c]=(0,a.useState)({amount:"",paymentMethod:"",notes:""}),x=e=>{l(e),c({amount:e.amount.toString(),paymentMethod:e.payment_method||"",notes:e.notes||""})},m=async()=>{try{await i.x.updateIncomeTransaction(o.id,{amount:parseFloat(d.amount),paymentMethod:d.paymentMethod,notes:d.notes}),alert("Транзакцията беше обновена успешно!"),l(null),n()}catch(e){console.error("Error updating transaction:",e),alert("Възникна грешка при обновяването")}},u=new Date(e+"-01").toLocaleDateString("bg-BG",{month:"long",year:"numeric"});return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-lg sticky top-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold",children:["\uD83D\uDCC5 ",u]}),r.jsx("button",{onClick:s,className:"text-white/80 hover:text-white text-2xl",children:"✕"})]}),(0,r.jsxs)("p",{className:"text-purple-100 mt-1",children:[t.length," транзакции"]})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[t.map(e=>r.jsx("div",{className:"bg-slate-700/50 border border-slate-600 rounded-lg p-4",children:o?.id===e.id?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Сума (BGN)"}),r.jsx("input",{type:"number",step:"0.01",value:d.amount,onChange:e=>c({...d,amount:e.target.value}),className:"w-full px-3 py-2 bg-slate-600 text-white rounded border border-slate-500 focus:border-green-500 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Метод на плащане"}),(0,r.jsxs)("select",{value:d.paymentMethod,onChange:e=>c({...d,paymentMethod:e.target.value}),className:"w-full px-3 py-2 bg-slate-600 text-white rounded border border-slate-500 focus:border-green-500 focus:outline-none",children:[r.jsx("option",{value:"cash",children:"\uD83D\uDCB5 Кеш"}),r.jsx("option",{value:"card",children:"\uD83D\uDCB3 Картово плащане"}),r.jsx("option",{value:"bank_transfer",children:"\uD83C\uDFE6 Банков път"}),r.jsx("option",{value:"online",children:"\uD83C\uDF10 Revolut"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Бележки"}),r.jsx("input",{type:"text",value:d.notes,onChange:e=>c({...d,notes:e.target.value}),className:"w-full px-3 py-2 bg-slate-600 text-white rounded border border-slate-500 focus:border-green-500 focus:outline-none",placeholder:"Допълнителни бележки..."})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded transition-colors",children:"✅ Запази"}),r.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded transition-colors",children:"✕ Отказ"})]})]}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-green-400",children:[e.amount.toFixed(2)," BGN"]}),r.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs",children:e.payment_method||"Неуточнен"}),r.jsx("span",{className:"text-sm text-slate-400",children:new Date(e.recorded_at).toLocaleDateString("bg-BG",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),e.case_description&&(0,r.jsxs)("p",{className:"text-sm text-slate-300 mb-1",children:["\uD83D\uDCCB ",e.case_description]}),e.notes&&(0,r.jsxs)("p",{className:"text-xs text-slate-400",children:["\uD83D\uDCAC ",e.notes]})]}),r.jsx("button",{onClick:()=>x(e),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors text-sm",children:"✏️ Редактирай"})]})},e.id)),0===t.length&&r.jsx("div",{className:"text-center py-8 text-slate-400",children:r.jsx("p",{children:"Няма транзакции за този месец"})})]})]})})}},5329:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>i,Zb:()=>l,aY:()=>c,ll:()=>d});var r=s(326),a=s(7577),n=s.n(a),o=s(1223);let l=n().forwardRef(({className:e,variant:t="default",padding:s="md",hover:a=!1,children:n,...l},i)=>{let d=`
      rounded-xl transition-all duration-300 ease-in-out
      ${a?"hover:scale-[1.02] hover:shadow-xl cursor-pointer":""}
    `,c={default:`
        bg-white/10 backdrop-blur-md border border-white/20 shadow-lg
        hover:shadow-xl hover:bg-white/15
      `,elevated:`
        bg-white/10 backdrop-blur-md shadow-xl hover:shadow-2xl
        border border-white/20 hover:border-white/30
      `,glass:`
        bg-white/10 backdrop-blur-md border border-white/20
        shadow-lg hover:shadow-xl hover:bg-white/20
      `,gradient:`
        bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-md
        border border-white/20 shadow-lg
        hover:from-white/15 hover:to-white/10 hover:shadow-xl
      `,outline:`
        bg-transparent border-2 border-white/30
        hover:border-white/50 hover:bg-white/10
      `};return r.jsx("div",{className:(0,o.cn)(d,c[t],{none:"",sm:"p-4",md:"p-6",lg:"p-8",xl:"p-10"}[s],e),ref:i,...l,children:n})});l.displayName="Card";let i=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 pb-4",e),...s,children:t}));i.displayName="CardHeader";let d=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("h3",{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight text-white",e),...s,children:t}));d.displayName="CardTitle",n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("p",{ref:a,className:(0,o.cn)("text-sm text-slate-300",e),...s,children:t})).displayName="CardDescription";let c=n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:(0,o.cn)("",e),...s,children:t}));c.displayName="CardContent",n().forwardRef(({className:e,children:t,...s},a)=>r.jsx("div",{ref:a,className:(0,o.cn)("flex items-center pt-4",e),...s,children:t})).displayName="CardFooter"},8256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/var/www/servicetextpro/Marketplace/src/app/dashboard/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,867,325,673,872],()=>s(7572));module.exports=r})();